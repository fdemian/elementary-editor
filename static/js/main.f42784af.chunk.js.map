{"version":3,"sources":["lib/Editor/TextElements/Latex/texUtils.js","lib/Editor/TextElements/Latex/KatexOutput.js","lib/Editor/TextElements/Latex/Buttons.js","lib/Editor/TextElements/Latex/EditPanel.js","lib/Editor/TextElements/Latex/TeXBlock.js","lib/Editor/TextElements/Spoiler/Spoiler.js","lib/Editor/TextElements/Spoiler/SpoilerWrapper.js","lib/Editor/TextElements/Media/Media.js","lib/Editor/TextElements/Link/RenderLink.js","lib/Editor/TextElements/Link/Link.js","lib/Editor/EditorStyles.js","lib/Editor/TextElements/Latex/LatexBlock.js","lib/DraftRenderer/Renderers.js","lib/DraftRenderer/DraftRenderer.js","lib/Editor/TextElements/QuoteBlock/QuoteBlock.js","lib/Editor/TextElements/QuoteBlock/QuoteBlockWrapper.js","lib/Editor/StyleButton.js","lib/Editor/URLInput.js","lib/Editor/Controls.js","lib/Editor/BaseEditor.js","lib/Editor/utils.js","lib/Editor/Editor.js","App.js","index.js"],"names":["defaultContent","content","KatexOutput","props","timerRef","useRef","outputRef","useEffect","current","clearTimeout","setTimeout","katex","render","displayMode","className","role","ref","onClick","EditorButtons","invalid","removeFn","saveFn","Group","size","style","marginLeft","type","name","faTimes","disabled","icon","faCheck","TextArea","textAreaStyle","width","EditPanel","editMode","onValueChange","texValue","invalidTeX","save","remove","rows","onChange","value","TeXBlock","useState","setEditMode","setTexValue","setInvalidTeX","saveMode","setSaveMode","contentState","blockProps","block","startEdit","key","getKey","onStartEdit","getValue","getEntity","getEntityAt","getData","editKey","_newState","entityKey","data","mergeEntityData","replaceData","onFinishEdit","texContent","evt","target","__parse","e","onRemove","Spoiler","textStatus","setTextStatus","cssClass","text","SpoilerWrapper","decoratedText","Media","src","undefined","entity","getType","alt","url","playing","RenderLink","href","rel","Link","children","EditorState","Draft","RichUtils","AtomicBlockUtils","insertMedia","editorState","getCurrentContent","createEntity","getLastCreatedEntityKey","insertAtomicBlock","EditorStyles","BLOCK_TYPES","label","faQuoteLeft","faHeading","faList","faListOl","faCode","INLINE_STYLES","faBold","faItalic","faUnderline","faStrikethrough","CUSTOM_STYLES","toggleFn","contentStateWithEntity","newEditorState","set","currentContent","newStateSelection","getSelection","toggleLink","requiresInput","requiresSelection","faLink","selection","isCollapsed","faUnlink","faImage","faEye","faVideo","faCalculator","LatexBlock","latexRef","styles","code","backgroundColor","fontFamily","fontSize","padding","codeBlock","listItem","float","addBreaklines","map","child","renderers","inline","BOLD","ITALIC","UNDERLINE","blocks","unstyled","blockquote","entities","Image","LINK","LATEX","SPOILER","Video","RenderWarning","Renderer","raw","rendered","redraft","QuoteBlock","comment","rawContent","JSON","parse","cite","author","QuoteBlockWrapper","StyleButton","onToggle","activeFn","getInput","iconStyle","color","marginTop","placement","title","blockName","preventDefault","URLInput","changeFn","urlValue","confirmFn","cancelFn","hintText","toLowerCase","placeholder","marginRight","EditorControls","editorStyles","blockIsActive","inlineIsActive","customBlockIsActive","customBlockToggleFn","onToggleInline","onToggleBlock","confirmInput","onInputChange","showInput","cancelInput","inputVisible","inputType","inputValue","bind","BaseEditor","config","AltEditor","altEditor","blockStyleFn","getBlockStyle","blockRendererFn","blockRenderMap","handleKeyCommand","reference","spellCheck","readOnly","blockStyle","findEntities","contentBlock","callback","findEntityRanges","character","filterStyle","listToFilter","filter","indexOf","CompositeDecorator","ContentState","DefaultDraftBlockRenderMap","convertToRaw","convertFromRaw","Map","element","extendedBlockRenderMap","merge","EditorComponent","initialStateEditor","initialState","containerRef","decorator","strategy","findLinkEntities","component","findSpoilerEntities","createEmpty","createWithContent","parsedState","editorRef","texEdits","setTexEdits","setEditorState","setInputVisible","setInputType","setInputValue","focus","count","_editorStyles","filterStyles","allowedStyles","filterWhiteListedStyles","getContent","getPlainText","removeTex","blockKey","getBlockForKey","targetRange","SelectionState","anchorKey","anchorOffset","focusKey","focusOffset","getLength","withoutTeX","Modifier","removeRange","resetBlock","setBlockType","getSelectionAfter","newState","push","forceSelection","removeTeXBlock","state","selectionIsCollapsed","findStyleObjectByName","insertEntity","entityName","newEntity","getStartKey","selectionState","start","getStartOffset","end","getEndOffset","selectedText","getText","slice","createNewImmutableEntity","insertEntityToState","toggleCustomStyle","styleObject","toUpperCase","mutability","insertCustomBlock","hasText","getBlockMap","first","clear","emptyState","createFromText","clearedState","useImperativeHandle","height","blockType","toggleBlockType","inlineStyle","toggleInlineStyle","selectionCollapsed","currentStyle","getCurrentInlineStyle","has","editor","tabIndex","editable","texEditState","newContentState","editorContent","insertTex","command","ButtonGroup","editorProps","default","description","editorPropsColumns","dataIndex","editorMethodsColumns","editorMethods","parameters","App","theme","id","columns","dataSource","pagination","currentState","jsonState","stringify","plaintext","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.f42784af.chunk.js","sourcesContent":["import { EditorState, Modifier, SelectionState } from 'draft-js'\r\n\r\n\r\nexport const defaultContent = { content: 'f(x) = ... ' };\r\n\r\nexport const getTexBlock = () => {\r\n   return {\r\n     type:'LATEX' ,\r\n     mutability:'Immutable',\r\n     content: defaultContent\r\n   };\r\n}\r\n\r\nexport const removeTeXBlock = (editorState, blockKey) => {\r\n\r\n  const content = editorState.getCurrentContent();\r\n  const block = content.getBlockForKey(blockKey);\r\n  \r\n  const targetRange = new SelectionState({\r\n    anchorKey: blockKey,\r\n    anchorOffset: 0,\r\n    focusKey: blockKey,\r\n    focusOffset: block.getLength()\r\n  });\r\n\r\n  const withoutTeX = Modifier.removeRange(content, targetRange, 'backward');\r\n  const resetBlock = Modifier.setBlockType(\r\n    withoutTeX,\r\n    withoutTeX.getSelectionAfter(),\r\n    'unstyled'\r\n  );\r\n\r\n  const newState = EditorState.push(editorState, resetBlock, 'remove-range');\r\n  const newStateWithoutTex = EditorState.forceSelection(newState, resetBlock.getSelectionAfter());\r\n\r\n  return newStateWithoutTex;\r\n}\r\n","import React, {useEffect, useRef} from 'react';\r\nimport katex from 'katex';\r\n\r\nconst KatexOutput = (props) => {\r\n\r\n  const timerRef = useRef();\r\n  const outputRef = useRef();\r\n\r\n  const update = () => {\r\n\r\n    if(timerRef.current)\r\n     clearTimeout(timerRef.current);\r\n\r\n    timerRef.current = setTimeout(() => {\r\n      katex.render(\r\n       props.content,\r\n       outputRef.current,\r\n       { displayMode: true }\r\n      )\r\n    }, 0)\r\n  }\r\n\r\n  useEffect(() => {\r\n    update()\r\n\r\n    return () => {\r\n      clearTimeout(timerRef.current);\r\n      timerRef.current = null;\r\n    }\r\n  });\r\n\r\n  return (\r\n  <div\r\n    className=\"katex-output\"\r\n    role='presentation'\r\n    ref={outputRef}\r\n    onClick={props.onClick}\r\n  />\r\n  );\r\n\r\n}\r\n\r\nexport default KatexOutput;\r\n","import React from 'react';\r\nimport { Button } from 'antd';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport {\r\n  faTimes,\r\n  faCheck\r\n} from '@fortawesome/free-solid-svg-icons';\r\n\r\nconst EditorButtons = ({ invalid, removeFn, saveFn }) => {\r\n  if (invalid) {\r\n    return (\r\n    <Button.Group size='large' style={{ marginLeft: '40%' }}>\r\n      <Button className=\"danger-btn\" type='danger' onClick={removeFn}>\r\n        <FontAwesomeIcon name={faTimes} size='lg' />\r\n        &nbsp; Remove\r\n      </Button>\r\n      <Button disabled>\r\n        Invalid TeX\r\n      </Button>\r\n    </Button.Group>\r\n    )\r\n  }\r\n\r\n  return (\r\n  <Button.Group\r\n    size='large'\r\n    style={{ marginLeft: '40%' }}\r\n  >\r\n    <Button\r\n      type='danger'\r\n      onClick={removeFn}\r\n      className=\"edit-panel-remove-btn\"\r\n    >\r\n      <FontAwesomeIcon icon={faTimes} />\r\n      &nbsp; Remove\r\n    </Button>\r\n    <Button\r\n      type='primary'\r\n      onClick={saveFn}\r\n      className=\"edit-panel-ok-btn\"\r\n    >\r\n      Done &nbsp;\r\n      <FontAwesomeIcon icon={faCheck} />\r\n    </Button>\r\n  </Button.Group>\r\n  )\r\n}\r\n\r\nexport default EditorButtons;\r\n","import React from 'react';\r\nimport { Input } from 'antd';\r\nimport EditorButtons from './Buttons';\r\n\r\nconst { TextArea } = Input;\r\n\r\nconst textAreaStyle = {\r\n  width: '20%',\r\n  marginLeft: '40%'\r\n};\r\n\r\nconst EditPanel = (props) => {\r\n\r\n  const {\r\n    editMode,\r\n    onValueChange,\r\n    texValue,\r\n    invalidTeX,\r\n    save,\r\n    remove,\r\n  } = props;\r\n\r\n  if(!editMode)\r\n    return null;\r\n\r\n  return (\r\n  <div className=\"edit-panel-container\">\r\n    <TextArea\r\n       rows={2}\r\n       style={textAreaStyle}\r\n       onChange={onValueChange}\r\n       value={texValue}\r\n    />\r\n    <div>\r\n      <EditorButtons\r\n        invalid={invalidTeX}\r\n        removeFn={remove}\r\n        saveFn={save}\r\n      />\r\n   </div>\r\n </div>\r\n );\r\n}\r\n\r\nexport default EditPanel;\r\n","import katex from 'katex';\r\nimport React, { useState, useEffect } from 'react';\r\nimport KatexOutput from './KatexOutput';\r\nimport EditPanel from './EditPanel';\r\n\r\nconst replaceData = (props) => {\r\n  const { entityKey, data, contentState } = props;\r\n  return contentState.mergeEntityData(entityKey,data);\r\n}\r\n\r\nconst TeXBlock = (props) => {\r\n\r\n const [editMode, setEditMode ] = useState(false);\r\n const [texValue, setTexValue] = useState(null);\r\n const [invalidTeX , setInvalidTeX] = useState(false);\r\n const [saveMode, setSaveMode] = useState(false);\r\n\r\n const {\r\n   contentState,\r\n   blockProps,\r\n   block\r\n } = props;\r\n\r\n const onClick = () => {\r\n   if (editMode)\r\n     return\r\n\r\n   setEditMode(true);\r\n   setTexValue(getValue());\r\n   startEdit();\r\n }\r\n\r\n const onValueChange = (evt) => {\r\n   const { value } = evt.target;\r\n   let invalid = false;\r\n\r\n   try {\r\n     /* eslint-disable */\r\n     katex.__parse(value);\r\n     /* eslint-enable */\r\n   } catch (e) {\r\n     invalid = true\r\n   } finally {\r\n     setInvalidTeX(invalid);\r\n     setTexValue(value);\r\n   }\r\n }\r\n\r\n const save = () => {\r\n   setInvalidTeX(false);\r\n   setEditMode(false);\r\n   setSaveMode(true);\r\n\r\n }\r\n\r\n const startEdit = () => {\r\n   const key = block.getKey();\r\n   blockProps.onStartEdit(key);\r\n }\r\n\r\n const remove = () => {\r\n   const key = block.getKey();\r\n   blockProps.onRemove(key);\r\n }\r\n\r\n const getValue = () => {\r\n   const entity = contentState.getEntity(block.getEntityAt(0));\r\n   return entity.getData().content;\r\n }\r\n\r\n useEffect(() => {\r\n  if(!editMode && !invalidTeX && saveMode) {\r\n    const editKey = block.getEntityAt(0);\r\n    const props = {\r\n      entityKey: editKey,\r\n      data: {'content': texValue},\r\n      contentState: contentState\r\n    };\r\n    let _newState = replaceData(props);\r\n    blockProps.onFinishEdit(editKey, _newState);\r\n  }\r\n}, [editMode, invalidTeX, saveMode, block, contentState, texValue])\r\n\r\n\r\n// TODO: Colapse into one line.\r\n let texContent = null;\r\n if (editMode) {\r\n   texContent = (invalidTeX ? '' : texValue)\r\n } else {\r\n   texContent = getValue();\r\n }\r\n\r\n let className = 'TeXEditor-tex' + (editMode ? ' TeXEditor-activeTeX' : \"\");\r\n\r\n return (\r\n <div className={className}>\r\n   <KatexOutput\r\n     content={texContent}\r\n     onClick={onClick}\r\n   />\r\n   <EditPanel\r\n     editMode={editMode}\r\n     onValueChange={onValueChange}\r\n     texValue={texValue}\r\n     invalidTeX={invalidTeX}\r\n     save={save}\r\n     remove={remove}\r\n   />\r\n </div>\r\n );\r\n\r\n}\r\n\r\nexport default TeXBlock;\r\n","import React, {useState} from 'react';\r\nimport './Spoiler.css';\r\n\r\nconst Spoiler = (props) => {\r\n  const [textStatus, setTextStatus] = useState('Concealed');\r\n  const cssClass = `Spoiler ${textStatus}`;\r\n\r\n  const changeStatus = () => {\r\n   const newStatus = textStatus === '' ? 'Concealed' : ''\r\n   setTextStatus(newStatus);\r\n  };\r\n\r\n  return (\r\n  <span\r\n    className={cssClass}\r\n    onClick={changeStatus}\r\n    role='presentation'\r\n  >\r\n    {props.text}\r\n  </span>\r\n  );\r\n}\r\n\r\nexport default Spoiler\r\n","import React from 'react';\r\nimport Spoiler from './Spoiler';\r\n\r\nconst SpoilerWrapper = ({ decoratedText }) => (\r\n  <Spoiler text={decoratedText} />\r\n)\r\n\r\nexport default SpoilerWrapper;\r\n","import React from 'react';\r\nimport ReactPlayer from 'react-player';\r\n\r\nconst Media = (props) => {\r\n\r\n  let src;\r\n  const { contentState, block } = props;\r\n\r\n  if(contentState !== null && contentState !== undefined) {\r\n    const entity = contentState.getEntity(block.getEntityAt(0))\r\n    src = entity.getData().src;\r\n\r\n    if(entity.getType() === \"Image\")\r\n      return <img src={src} alt=\"\" />;\r\n  }\r\n  else {\r\n    src = props.src;\r\n  }\r\n\r\n  return(<ReactPlayer url={src} playing={false} />);\r\n}\r\n\r\nexport default Media;\r\n","import React from 'react'\r\n\r\nconst RenderLink = ({ url, text }) => (\r\n  <a href={url} rel='nofollow'>\r\n    {text}\r\n  </a>\r\n)\r\n\r\nexport default RenderLink\r\n","import React from 'react';\r\nimport RenderLink from './RenderLink';\r\n\r\nconst Link = (props) => {\r\n  const { contentState, entityKey } = props;\r\n  const entityInstance = contentState.getEntity(entityKey);\r\n  const { url } = entityInstance.getData();\r\n\r\n  return <RenderLink url={url} text={props.children} />;\r\n}\r\n\r\nexport default Link;\r\n","import Draft from 'draft-js'\r\n\r\n// Font awesome icons.\r\nimport {\r\n  faQuoteLeft,\r\n  faHeading,\r\n  faList,\r\n  faListOl,\r\n  faCode,\r\n  faBold,\r\n  faItalic,\r\n  faUnderline,\r\n  faStrikethrough,\r\n  faLink,\r\n  faUnlink,\r\n  faImage,\r\n  faEye,\r\n  faVideo,\r\n  faCalculator\r\n} from '@fortawesome/free-solid-svg-icons'\r\n\r\nconst {\r\n  EditorState,\r\n  RichUtils,\r\n  AtomicBlockUtils\r\n} = Draft\r\n\r\n/* ----------------------------------------- */\r\n\r\nexport const insertMedia = (editorState, type, value) => {\r\n\r\n  const contentState = editorState.getCurrentContent();\r\n  const contentStateWithEntity = contentState.createEntity(type, 'IMMUTABLE', { src: value });\r\n  const entityKey = contentStateWithEntity.getLastCreatedEntityKey();\r\n\r\n  const mediaBlock = AtomicBlockUtils.insertAtomicBlock(editorState, entityKey, type);\r\n\r\n  return mediaBlock;\r\n}\r\n\r\nexport const insertLink = (editorState, type, value) => {\r\n\r\n  const contentState = editorState.getCurrentContent();\r\n  const contentStateWithEntity = contentState.createEntity('LINK', 'MUTABLE', { url: value });\r\n  const entityKey = contentStateWithEntity.getLastCreatedEntityKey();\r\n\r\n  //\r\n  const newEditorState = EditorState.set(editorState, { currentContent: contentStateWithEntity });\r\n  const newStateSelection = newEditorState.getSelection();\r\n  const linkState = RichUtils.toggleLink(newEditorState, newStateSelection, entityKey);\r\n\r\n  return linkState;\r\n}\r\n\r\nexport const removeLink = (editorState) => {\r\n  const selection = editorState.getSelection()\r\n\r\n  if (!selection.isCollapsed()) {\r\n    return RichUtils.toggleLink(editorState, selection, null);\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\n/* ------------------- */\r\n\r\nconst BLOCK_TYPES =\r\n[\r\n  { label: 'Quote', style: 'blockquote', icon: faQuoteLeft },\r\n  { label: 'Heading', style: 'header-two', icon: faHeading },\r\n  { label: 'Unordered List', style: 'unordered-list-item', icon: faList },\r\n  { label: 'Ordered List', style: 'ordered-list-item', icon: faListOl },\r\n  { label: 'Code Block', style: 'code-block', icon: faCode }\r\n]\r\n\r\nconst INLINE_STYLES =\r\n[\r\n  { label: 'Bold', style: 'BOLD', icon: faBold },\r\n  { label: 'Italic', style: 'ITALIC', icon: faItalic },\r\n  { label: 'Underline', style: 'UNDERLINE', icon: faUnderline },\r\n  { label: 'Strikethrough', style: 'STRIKETHROUGH', icon: faStrikethrough }\r\n]\r\n\r\nconst CUSTOM_STYLES =\r\n[\r\n  {\r\n    label: 'Link',\r\n    style: 'Link',\r\n    toggleFn: insertLink,\r\n    requiresInput: true,\r\n    requiresSelection: true,\r\n    icon: faLink\r\n  },\r\n  {\r\n    label: 'Remove Link',\r\n    style: 'LinkRemove',\r\n    toggleFn: removeLink,\r\n    requiresInput: false,\r\n    requiresSelection: false,\r\n    icon: faUnlink\r\n  },\r\n  {\r\n    label: 'Image',\r\n    style: 'Image',\r\n    toggleFn: insertMedia,\r\n    requiresInput: true,\r\n    requiresSelection: false,\r\n    icon: faImage\r\n  },\r\n  {\r\n    label: 'Spoiler',\r\n    style: 'Spoiler',\r\n    //toggleFn: insertSpoiler,\r\n    requiresInput: false,\r\n    requiresSelection: true,\r\n    icon: faEye\r\n  },\r\n  {\r\n    label: 'Video',\r\n    style: 'Video',\r\n    toggleFn: insertMedia,\r\n    requiresInput: true,\r\n    requiresSelection: false,\r\n    icon: faVideo\r\n  },\r\n  {\r\n    label: 'Latex',\r\n    style: 'Latex',\r\n    //toggleFn: insertTex,\r\n    requiresInput: false,\r\n    requiresSelection: false,\r\n    icon: faCalculator\r\n  }\r\n];\r\n\r\nconst EditorStyles = { BLOCK_TYPES, INLINE_STYLES, CUSTOM_STYLES };\r\n\r\nexport default EditorStyles;\r\n","import React, {useEffect, useRef} from 'react';\r\nimport katex from 'katex';\r\n\r\nconst LatexBlock = (props) => {\r\n\r\n  const timerRef = useRef();\r\n  const latexRef = useRef();\r\n\r\n  const update = () => {\r\n    if(timerRef.current)\r\n     clearTimeout(timerRef.current);\r\n\r\n    timerRef.current = setTimeout(() => {\r\n      katex.render(\r\n        props.content,\r\n        latexRef.current,\r\n        { displayMode: true }\r\n      );\r\n    }, 0)\r\n  }\r\n\r\n  useEffect(() => {\r\n    update();\r\n\r\n    return () => {\r\n      clearTimeout(timerRef.current);\r\n      timerRef.current = null;\r\n    }\r\n  });\r\n\r\n  return <span className=\"latex-block\" ref={latexRef} />;\r\n}\r\n\r\nexport default LatexBlock\r\n","import React from 'react'\r\nimport Spoiler from '../Editor/TextElements/Spoiler/Spoiler'\r\nimport LatexBlock from '../Editor/TextElements/Latex/LatexBlock'\r\nimport Media from '../Editor/TextElements/Media/Media'\r\n//import QuoteBlock from '../Editor/TextElements/QuoteBlock/QuoteBlock'\r\nimport RenderLink from '../Editor/TextElements/Link/RenderLink'\r\n\r\n/* Style callbacks */\r\nconst styles = {\r\n  code: {\r\n    backgroundColor: 'rgba(0, 0, 0, 0.05)',\r\n    fontFamily: '\"Inconsolata\", \"Menlo\", \"Consolas\", monospace',\r\n    fontSize: 16,\r\n    padding: 2\r\n  },\r\n  codeBlock: {\r\n    backgroundColor: 'rgba(0, 0, 0, 0.05)',\r\n    fontFamily: '\"Inconsolata\", \"Menlo\", \"Consolas\", monospace',\r\n    fontSize: 16,\r\n    padding: 20\r\n  },\r\n  listItem: {\r\n    float: 'none'\r\n  }\r\n};\r\n\r\n// Adds a <br /> after a block.\r\nconst addBreaklines = children => children.map(child => [child, <br />]);\r\n\r\nconst renderers = {\r\n\r\n  /* Inline Styles */\r\n  inline: {\r\n    BOLD: children => <strong>{children}</strong>,\r\n    ITALIC: children => <em>{children}</em>,\r\n    UNDERLINE: children => <u>{children}</u>\r\n  },\r\n\r\n  /* Block Styles */\r\n  blocks: {\r\n    unstyled: children => children.map(child => <p>{child}</p>),\r\n    blockquote: children => <blockquote key={1}>{addBreaklines(children)}</blockquote>,\r\n    'header-two': children => children.map(child => <h2>{child}</h2>),\r\n    'code-block': children => <pre style={styles.codeBlock}>{addBreaklines(children)}</pre>,\r\n    'unordered-list-item': children => <ul>{children.map(child => <li style={styles.listItem}>{child}</li>)}</ul>,\r\n    'ordered-list-item': children => <ol>{children.map(child => <li style={styles.listItem}>{child}</li>)}</ol>\r\n  },\r\n\r\n  /* Entities */\r\n  entities: {\r\n    Image: (children, data) => <div><img src={data.src} alt='' /></div>,\r\n    LINK: (children, data) => <RenderLink src={data.url} text={children} />,\r\n    LATEX: (children, data) => <LatexBlock content={data.content} />,\r\n    SPOILER: children => <Spoiler text={children[0]} />,\r\n    Video: (children, data) => <div className=\"video-element\"><Media src={data.src} /></div>,\r\n    /*QuoteBlock: (children, data) => <QuoteBlock comment={data.props} />*/\r\n  }\r\n\r\n};\r\n\r\nexport default renderers;\r\n","import React from 'react';\r\nimport redraft from 'redraft';\r\nimport renderers from './Renderers';\r\n\r\nconst RenderWarning = () => <div className=\"render-warning\">Nothing to render.</div>;\r\n\r\nconst Renderer = ({ raw }) => {\r\n\r\n  if (!raw)\r\n    return <RenderWarning />;\r\n\r\n  const rendered = redraft(raw, renderers);\r\n\r\n  if (!rendered)\r\n    return <RenderWarning />;\r\n\r\n  return <div>{rendered}</div>;\r\n}\r\n\r\nexport default Renderer;\r\n","import React from 'react';\r\nimport Renderer from '../../../DraftRenderer/DraftRenderer';\r\nimport './QuoteBlock.css';\r\n\r\nconst QuoteBlock = ({ comment }) => {\r\n  const rawContent = JSON.parse(comment.content);\r\n\r\n  return (\r\n  <blockquote cite={comment.author}>\r\n    <Renderer raw={rawContent} />\r\n  </blockquote>\r\n  )\r\n}\r\n\r\nexport default QuoteBlock;\r\n","import React from 'react'\r\nimport QuoteBlock from './QuoteBlock'\r\n\r\nconst QuoteBlockWrapper = (props) => {\r\n  const entity = props.contentState.getEntity(props.block.getEntityAt(0))\r\n\r\n  const comment = entity.getData().props\r\n\r\n  return (<QuoteBlock comment={comment} />)\r\n}\r\n\r\nexport default QuoteBlockWrapper\r\n","import React from 'react'\r\nimport { Tooltip } from 'antd'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\n\r\nimport './css/StyleButton.css'\r\n\r\nconst StyleButton = (props) => {\r\n\r\n  const {\r\n   onToggle,\r\n   getInput,\r\n   activeFn,\r\n   icon,\r\n   style,\r\n   label\r\n  } = props\r\n\r\n  const isActive = activeFn(style);\r\n  const iconColor = isActive ? 'black' : 'gainsboro';\r\n  const iconStyle = { color: iconColor, marginTop: '6px' };\r\n\r\n  const toggleFn = (e) => {\r\n   e.preventDefault();\r\n   onToggle(style);\r\n  }\r\n\r\n  return (\r\n  <Tooltip placement='bottom' title={label} >\r\n    <button\r\n      className='StyleButton'\r\n      onClick={(blockName) => toggleFn(blockName, getInput)}\r\n     >\r\n      <FontAwesomeIcon\r\n        size='lg'\r\n        style={iconStyle}\r\n        icon={icon}\r\n      />\r\n    </button>\r\n  </Tooltip>\r\n  )\r\n}\r\n\r\nexport default StyleButton\r\n","import React, { Fragment } from 'react'\r\nimport { Input, Button } from 'antd'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport {\r\n  faTimes,\r\n  faCheck\r\n} from '@fortawesome/free-solid-svg-icons'\r\n\r\nconst URLInput = ({ changeFn, urlValue, confirmFn, cancelFn, type }) => {\r\n\r\n  const hintText = `Enter ${type.toLowerCase()} URL`\r\n\r\n  return (\r\n  <Fragment>\r\n\r\n    <span className=\"url-input-container\">\r\n      <Input\r\n        name='URL input'\r\n        onChange={changeFn}\r\n        value={urlValue}\r\n        placeholder={hintText}\r\n        style={{ width: '400px', marginLeft: '40px', marginTop: '10px' }}\r\n      />\r\n    </span>\r\n\r\n    <span style={{ marginLeft: '8px' }}>\r\n      <Button type='primary' onClick={cancelFn} style={{ marginRight: '2px' }}>\r\n          <FontAwesomeIcon icon={faTimes} />\r\n      </Button>\r\n      <Button type='primary' onClick={confirmFn}>\r\n        <FontAwesomeIcon icon={faCheck} />\r\n      </Button>\r\n    </span>\r\n\r\n  </Fragment>\r\n  )\r\n}\r\n\r\nexport default URLInput\r\n","import React from 'react';\r\nimport StyleButton from './StyleButton';\r\nimport URLInput from './URLInput';\r\nimport './css/Controls.css';\r\n\r\nconst EditorControls = (props) => {\r\n\r\n  const {\r\n    editorStyles,\r\n    blockIsActive,\r\n    inlineIsActive,\r\n    customBlockIsActive,\r\n    customBlockToggleFn,\r\n    onToggleInline,\r\n    onToggleBlock,\r\n    confirmInput,\r\n    onInputChange,\r\n    showInput,\r\n    cancelInput,\r\n    inputVisible,\r\n    inputType,\r\n    inputValue,\r\n  } = props;\r\n\r\n  if (inputVisible) {\r\n    return (\r\n    <div className='EditorControls'>\r\n      <div className='RichEditor-controls'>\r\n        <URLInput\r\n          changeFn={onInputChange}\r\n          urlValue={inputValue}\r\n          type={inputType}\r\n          cancelFn={cancelInput}\r\n          confirmFn={confirmInput}\r\n        />\r\n       </div>\r\n     </div>\r\n     );\r\n  }\r\n\r\n  // TODO merge stylebutton mappings.\r\n  return (\r\n  <div className='EditorControls'>\r\n    <div className='RichEditor-controls'>\r\n      {editorStyles.INLINE_STYLES.map(type =>\r\n        (<StyleButton\r\n            key={type.label}\r\n            activeFn={inlineIsActive.bind(type.style)}\r\n            label={type.label}\r\n            onToggle={onToggleInline}\r\n            style={type.style}\r\n            icon={type.icon}\r\n        />))}\r\n        {editorStyles.BLOCK_TYPES.map(type =>\r\n          (<StyleButton\r\n            key={type.label}\r\n            activeFn={blockIsActive.bind(type.style)}\r\n            label={type.label}\r\n            onToggle={onToggleBlock}\r\n            style={type.style}\r\n            icon={type.icon}\r\n          />))}\r\n          {editorStyles.CUSTOM_STYLES.map(type =>\r\n            (<StyleButton\r\n              key={type.label}\r\n              activeFn={customBlockIsActive}\r\n              label={type.label}\r\n              onToggle={customBlockToggleFn}\r\n              getInput={showInput}\r\n              style={type.style}\r\n              icon={type.icon}\r\n          />))}\r\n      </div>\r\n    </div>\r\n    )\r\n};\r\n\r\nexport default EditorControls\r\n","import React from 'react';\r\nimport { Editor } from 'draft-js';\r\n\r\nconst BaseEditor = (config) => {\r\n\r\n  const AltEditor = config.altEditor;\r\n\r\n  if (AltEditor) {\r\n    return (\r\n    <AltEditor\r\n      blockStyleFn={config.getBlockStyle}\r\n      blockRendererFn={config.blockRendererFn}\r\n      blockRenderMap={config.blockRenderMap}\r\n      editorState={config.editorState}\r\n      handleKeyCommand={config.handleKeyCommand}\r\n      onChange={config.onChange}\r\n      ref={config.reference}\r\n      spellCheck={config.spellCheck}\r\n      readOnly={config.readOnly}\r\n    />\r\n    );\r\n  }\r\n\r\n  return (\r\n  <Editor\r\n    blockStyleFn={config.getBlockStyle}\r\n    blockRendererFn={config.blockRendererFn}\r\n    blockRenderMap={config.blockRenderMap}\r\n    editorState={config.editorState}\r\n    handleKeyCommand={config.handleKeyCommand}\r\n    onChange={config.onChange}\r\n    ref={config.reference}\r\n    spellCheck={config.spellCheck}\r\n    readOnly={config.readOnly}\r\n  />\r\n  );\r\n\r\n}\r\n\r\nexport default BaseEditor\r\n","import { EditorState, RichUtils } from 'draft-js';\r\n\r\nexport const getBlockStyle = (block) => {\r\n  let blockStyle = null\r\n\r\n  switch (block.getType()) {\r\n    case 'blockquote':\r\n      blockStyle = 'Blockquote'\r\n      break\r\n    case 'code-block':\r\n      blockStyle = 'Code'\r\n      break\r\n    default:\r\n      blockStyle = null\r\n  }\r\n\r\n  return blockStyle;\r\n\r\n}\r\n\r\nexport const findEntities = (contentBlock, callback, contentState, type) => {\r\n  contentBlock.findEntityRanges(character => {\r\n    const entityKey = character.getEntity();    \r\n    return (\r\n      entityKey !== null &&\r\n      contentState.getEntity(entityKey).getType() === type\r\n    );\r\n  }, callback);\r\n}\r\n\r\nexport const findLinkEntities = (contentBlock, callback, contentState) =>\r\nfindEntities(contentBlock, callback, contentState, 'LINK');\r\n\r\nexport const findSpoilerEntities = (contentBlock, callback, contentState) =>\r\nfindEntities(contentBlock, callback, contentState, 'SPOILER');\r\n\r\nexport const filterStyle = (listToFilter, filter) => {\r\n  return listToFilter.filter(e => filter.indexOf(e.style) !== -1);\r\n}\r\n\r\nexport const filterWhiteListedStyles = (styles, allowedStyles) => {\r\n  return {\r\n    BLOCK_TYPES: filterStyle(styles.BLOCK_TYPES, allowedStyles),\r\n    INLINE_STYLES: filterStyle(styles.INLINE_STYLES, allowedStyles),\r\n    CUSTOM_STYLES: filterStyle(styles.CUSTOM_STYLES, allowedStyles)\r\n  };\r\n}\r\n\r\nexport const createNewImmutableEntity = (editorState, element) => {\r\n  const selection = editorState.getSelection();\r\n  const contentBlock = editorState.getCurrentContent().getBlockForKey(selection.getStartKey())\r\n  const selectionState = editorState.getSelection();\r\n  const start = selectionState.getStartOffset();\r\n  const end = selectionState.getEndOffset();\r\n  const selectedText = contentBlock.getText().slice(start, end);\r\n  const contentState = editorState.getCurrentContent();\r\n\r\n  const contentStateEntity = contentState.createEntity(element, 'IMMUTABLE', { text: selectedText })\r\n\r\n  return contentStateEntity;\r\n}\r\n\r\nexport const insertEntityToState = (editorState, newEntity) => {\r\n  const entityKey = newEntity.getLastCreatedEntityKey();\r\n  const newEditorState = EditorState.set(editorState, { currentContent: newEntity});\r\n  const newState = RichUtils.toggleLink(newEditorState, newEditorState.getSelection(), entityKey);\r\n\r\n  return newState;\r\n}\r\n","import React, { useState, useRef, useImperativeHandle } from \"react\";\nimport Draft from \"draft-js\";\nimport { Map } from \"immutable\";\nimport { getTexBlock, removeTeXBlock } from \"./TextElements/Latex/texUtils\";\nimport TeXBlock from \"./TextElements/Latex/TeXBlock\";\nimport Spoiler from \"./TextElements/Spoiler/SpoilerWrapper\";\nimport Media from \"./TextElements/Media/Media\";\nimport Link from \"./TextElements/Link/Link\";\nimport editorStyles from \"./EditorStyles\";\nimport QuoteBlockWrapper from \"./TextElements/QuoteBlock/QuoteBlockWrapper\";\nimport EditorControls from \"./Controls\";\nimport BaseEditor from \"./BaseEditor\";\nimport {\n  getBlockStyle,\n  findLinkEntities,\n  findSpoilerEntities,\n  filterWhiteListedStyles,\n  createNewImmutableEntity,\n  insertEntityToState,\n} from \"./utils\";\n\nimport \"katex/dist/katex.css\";\nimport \"./css/Draft.css\";\nimport \"./css/Editor.css\";\n\nconst {\n  CompositeDecorator,\n  ContentState,\n  EditorState,\n  RichUtils,\n  DefaultDraftBlockRenderMap,\n  convertToRaw,\n  convertFromRaw,\n  AtomicBlockUtils,\n} = Draft;\n\nconst blockRenderMap = Map({\n  SPOILER: { element: Spoiler },\n  LATEX: { element: TeXBlock },\n});\n\nconst extendedBlockRenderMap = DefaultDraftBlockRenderMap.merge(blockRenderMap);\n\nconst EditorComponent = (props) => {\n  const { altEditor, initialState, containerRef } = props;\n\n  let decorator = null;\n  let initialStateEditor;\n\n  if (!altEditor) {\n    decorator = new CompositeDecorator([\n      {\n        strategy: (contentBlock, callback, contentState) =>\n          findLinkEntities(contentBlock, callback, contentState),\n        component: Link,\n      },\n      {\n        strategy: (contentBlock, callback, contentState) =>\n          findSpoilerEntities(contentBlock, callback, contentState),\n        component: Spoiler,\n      },\n    ]);\n  }\n\n  const { createEmpty, createWithContent } = EditorState;\n\n  if (initialState == null) {\n    initialStateEditor = createEmpty(decorator);\n  } else {\n    const parsedState = JSON.parse(initialState);\n    const contentState = convertFromRaw(parsedState);\n    initialStateEditor = createWithContent(contentState, decorator);\n  }\n\n  const editorRef = useRef(null);\n\n  // State and refs.\n  const [texEdits, setTexEdits] = useState(Map());\n  const [editorState, setEditorState] = useState(initialStateEditor);\n  const [inputVisible, setInputVisible] = useState(false);\n  const [inputType, setInputType] = useState(\"\");\n  const [inputValue, setInputValue] = useState(\"\");\n\n  // Functions.\n  const focus = () => editorRef.current.focus();\n  const readOnly = texEdits.count();\n  const getCurrentContent = () => editorState.getCurrentContent();\n  const customBlockIsActive = () => false; // TODO: revise.\n\n  let _editorStyles = null;\n\n  // If the user has defined which styles to whitelist, use only those.\n  // Otherwise use all of the styles.\n  let filterStyles =\n    props.filterStyles === undefined ? null : props.filterStyles;\n\n  if (filterStyles === null) {\n    _editorStyles = editorStyles;\n  } else {\n    const whiteListed = filterWhiteListedStyles(\n      editorStyles,\n      props.filterStyles\n    );\n    _editorStyles = whiteListed;\n  }\n\n  const getContent = () => {\n    const currentContent = getCurrentContent();\n    return convertToRaw(currentContent);\n  };\n\n  const getPlainText = () => {\n    return getCurrentContent().getPlainText();\n  };\n\n  const removeTex = (blockKey) => {\n    setTexEdits(texEdits.remove(blockKey));\n    setEditorState(removeTeXBlock(editorState, blockKey));\n  };\n\n  const insertTex = (blockKey, newContentState) => {\n    const { createWithContent } = EditorState;\n    const texEditState = texEdits.remove(blockKey);\n    const editorContent = createWithContent(newContentState);\n\n    setTexEdits(texEditState);\n    setEditorState(editorContent);\n  };\n\n  const blockIsActive = (block) => {\n    const selection = editorState.getSelection();\n    const blockType = editorState\n      .getCurrentContent()\n      .getBlockForKey(selection.getStartKey())\n      .getType();\n\n    return block === blockType;\n  };\n\n  const inlineIsActive = (style) => {\n    const currentStyle = editorState.getCurrentInlineStyle();\n\n    if (currentStyle === undefined) return false;\n\n    return currentStyle.has(style);\n  };\n\n  const onChange = (state) => {\n    setEditorState(state);\n    if (props.onChange) props.onChange(getContent());\n  };\n\n  const handleKeyCommand = (command) => {\n    const { handleKeyCommand } = RichUtils;\n    const newState = handleKeyCommand(editorState, command);\n\n    if (newState) {\n      onChange(newState);\n      return true;\n    }\n\n    return false;\n  };\n\n  const customRenderFn = (contentBlock) => {\n    const type = contentBlock.getType();\n    const text = contentBlock.getText();\n\n    if (text === \"media\" || text === \"Image\" || text === \"Video\") {\n      return {\n        component: Media,\n        editable: false,\n      };\n    }\n\n    if (text === \"QuoteBlock\") {\n      return {\n        component: QuoteBlockWrapper,\n        editable: false,\n      };\n    }\n\n    if (type === \"atomic\") {\n      return {\n        component: TeXBlock,\n        editable: false,\n        props: {\n          onStartEdit: (blockKey) => {\n            const texEditState = texEdits.set(blockKey, true);\n            setTexEdits(texEditState);\n          },\n          onFinishEdit: (blockKey, newContentState) =>\n            insertTex(blockKey, newContentState),\n          onRemove: (blockKey) => removeTex(blockKey),\n        },\n      };\n    }\n\n    return null;\n  };\n\n  const selectionIsCollapsed = () => {\n    return editorState.getSelection().isCollapsed();\n  };\n\n  const findStyleObjectByName = (name) => {\n    const customStyles = editorStyles.CUSTOM_STYLES;\n    const matches = customStyles.filter(\n      (style) => style.label === name || style.style === name\n    );\n\n    return matches[0];\n  };\n\n  const insertEntity = (entityName) => {\n    const newEntity = createNewImmutableEntity(editorState, entityName);\n    const newState = insertEntityToState(editorState, newEntity);\n    setEditorState(newState, () => {\n      setTimeout(() => focus(), 0);\n    });\n  };\n\n  const customBlockToggleFn = (blockName, getInput) => {\n    const selectionCollapsed = selectionIsCollapsed();\n    const styleObject = findStyleObjectByName(blockName);\n    const { requiresSelection } = styleObject;\n\n    if (styleObject.toggleFn === null) return;\n\n    if (requiresSelection && selectionCollapsed) return;\n\n    if (styleObject.requiresInput) {\n      setInputVisible(true);\n      setInputType(styleObject.label);\n      return;\n    }\n\n    toggleCustomStyle(styleObject);\n  };\n\n  const confirmInput = (e) => {\n    e.preventDefault();\n\n    const styleObject = findStyleObjectByName(inputType);\n\n    if (styleObject.toggleFn == null) return;\n\n    const newState = styleObject.toggleFn(editorState, inputType, inputValue);\n\n    // Reset input fields.\n    setInputVisible(false);\n    setInputValue(\"\");\n    setInputType(\"\");\n\n    // Set the new editor state.\n    if (newState !== null) setEditorState(newState);\n  };\n\n  const onInputChange = (e) => {\n    setInputValue(e.target.value);\n  };\n\n  const cancelInput = () => {\n    setInputVisible(false);\n    setInputValue(\"\");\n    setInputType(\"\");\n  };\n\n  const showInput = () => setInputVisible(true);\n\n  const insertCustomBlock = (block) => {\n    const { type, mutability, content } = block;\n\n    const { insertAtomicBlock } = AtomicBlockUtils;\n\n    const contentStateWithEntity = contentState.createEntity(\n      type,\n      mutability,\n      content\n    );\n    const entityKey = contentStateWithEntity.getLastCreatedEntityKey();\n\n    const newEditorState = EditorState.set(editorState, {\n      currentContent: contentStateWithEntity,\n    });\n\n    return insertAtomicBlock(newEditorState, entityKey, \" \");\n  };\n\n  const toggleCustomStyle = (styleObject) => {\n    let newState = null;\n\n    switch (styleObject.style.toUpperCase()) {\n      case \"SPOILER\":\n        insertEntity(\"SPOILER\");\n        break;\n\n      case \"LATEX\":\n        const texBlock = getTexBlock();\n        newState = insertCustomBlock(texBlock);\n        break;\n\n      default:\n        break;\n    }\n\n    if (newState !== null) setEditorState(newState);\n  };\n\n  const toggleBlockType = (blockType) => {\n    const { toggleBlockType } = RichUtils;\n    onChange(toggleBlockType(editorState, blockType));\n  };\n\n  const toggleInlineStyle = (inlineStyle) => {\n    const { toggleInlineStyle } = RichUtils;\n    onChange(toggleInlineStyle(editorState, inlineStyle));\n  };\n\n  // TODO: check this out.\n  // If the user changes block type before entering any text, we can\n  // either style the placeholder or hide it. Let's just hide it now.\n  let className = \"RichEditor-editor Editor\";\n  const contentState = editorState.getCurrentContent();\n\n  if (!contentState.hasText()) {\n    if (contentState.getBlockMap().first().getType() !== \"unstyled\") {\n      className += \" RichEditor-hidePlaceholder Editor\";\n    }\n  }\n\n  const clear = () => {\n    const emptyState = ContentState.createFromText(\"\");\n    const clearedState = EditorState.push(editorState, emptyState);\n    setTexEdits(Map());\n    setEditorState(clearedState);\n  };\n\n  // Exposed methods.\n  useImperativeHandle(containerRef, () => {\n    return {\n      clear: clear,\n      getContent: getContent,\n      getPlainText: getPlainText,\n    };\n  });\n\n  return (\n    <div\n      style={{ height: \"100%\" }}\n      ref={containerRef}\n      className=\"em-editor-container\"\n    >\n      <EditorControls\n        editorState={editorState}\n        editorStyles={_editorStyles}\n        onToggleBlock={toggleBlockType}\n        onToggleInline={toggleInlineStyle}\n        selectionCollapsed={selectionIsCollapsed}\n        blockIsActive={blockIsActive}\n        inlineIsActive={inlineIsActive}\n        customBlockIsActive={customBlockIsActive}\n        customBlockToggleFn={customBlockToggleFn}\n        editor={containerRef}\n        inputType={inputType}\n        inputVisible={inputVisible}\n        inputValue={inputValue}\n        confirmInput={confirmInput}\n        onInputChange={onInputChange}\n        cancelInput={cancelInput}\n        showInput={showInput}\n      />\n      <div className={className} onClick={focus} role=\"textbox\" tabIndex={0}>\n        <BaseEditor\n          blockStyleFn={getBlockStyle}\n          blockRendererFn={customRenderFn}\n          blockRenderMap={extendedBlockRenderMap}\n          editorState={editorState}\n          handleKeyCommand={handleKeyCommand}\n          onChange={onChange}\n          spellCheck={false}\n          readOnly={readOnly}\n          altEditor={altEditor}\n          reference={editorRef}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default EditorComponent;\n","import React, { useRef, useState } from 'react';\r\nimport Editor from './lib/Editor/Editor';\r\nimport { Button, Card, Menu, Table } from 'antd';\r\nimport './App.css';\r\n\r\nconst ButtonGroup = Button.Group;\r\n\r\nconst editorUsageCodeClass =\r\n`import Editor from 'elementary-editor';\r\n class MyComponent extends Component  {\r\n\r\n   constructor(props) {\r\n     super(props);\r\n     this.state = { editorState: null }\r\n     this.containerRef = null;\r\n   }\r\n\r\n   render() {\r\n     return(\r\n     <div>\r\n       <Editor\r\n         initialState={null}\r\n         containerRef={(editor) => this.editor = editor}\r\n      />\r\n     );\r\n   }\r\n  }\r\n`;\r\n\r\nconst editorUsageCodeHooks =\r\n`\r\nimport React, { useRef } from 'react';\r\nimport Editor from 'elementary-editor';\r\n\r\nconst MyComponent = () =>  {\r\n\r\n const containerRef = useRef(null);\r\n\r\n return(\r\n <div>\r\n   <Editor\r\n     initialState={null}\r\n     containerRef={containerRef}\r\n   />\r\n </div>\r\n  );\r\n}`;\r\n\r\nconst editorProps = [\r\n   {name: \"initialState\", type: \"JSON string\", default: \"null\", description: \"A draft-js rawState object with the initial state of the editor. If set to null it will initialize the editor with no text.\"},\r\n   {name: \"filterStyles\", type: \"string[]\", default: \"null\", description: \"A list of the styles the editor will use. If set it will only use those styles. If the parameter is null or isn't specified, all the available styles will be used.\"}\r\n];\r\n\r\nconst editorPropsColumns = [\r\n  {\r\n    title: 'Name',\r\n    dataIndex: 'name',\r\n    key: 'name'\r\n  },\r\n  {\r\n\ttitle: 'Type',\r\n\tdataIndex: 'type',\r\n\tkey: 'type',\r\n  },\r\n  {\r\n\ttitle: 'Default',\r\n\tdataIndex: 'default',\r\n\tkey: 'default',\r\n  },\r\n  {\r\n\ttitle: 'description',\r\n\tdataIndex: 'description',\r\n\tkey: 'description',\r\n  }\r\n];\r\n\r\nconst editorMethodsColumns = [\r\n {\r\n    title: 'Name',\r\n    dataIndex: 'name',\r\n    key: 'name'\r\n  },\r\n  {\r\n\ttitle: 'Parameters',\r\n\tdataIndex: 'parameters',\r\n\tkey: 'parameters',\r\n  },\r\n  {\r\n\ttitle: 'description',\r\n\tdataIndex: 'description',\r\n\tkey: 'description',\r\n  }\r\n];\r\n\r\nconst editorMethods = [\r\n  {\r\n\tname: \"getContent\",\r\n\tparameters: \"-\",\r\n\tdescription: \"Gets the current DraftJS raw editor state.\"\r\n  },\r\n  {\r\n  name: \"getPlainText\",\r\n  parameters: \"-\",\r\n  description: \"Gets the current editor content as plain text.\"\r\n  },\r\n  {\r\n\tname: \"clear\",\r\n\tparameters: \"-\",\r\n\tdescription: \"Clears the editor.\"\r\n  }\r\n];\r\n\r\nconst App = () => {\r\n\r\n const [editorState, setEditorState] = useState(null);\r\n const containerRef = useRef(null);\r\n\r\n const clearEditor = () => {\r\n   containerRef.current.clear();\r\n }\r\n\r\n const logState = () => {\r\n   const currentState = containerRef.current.getContent();\r\n   const jsonState = JSON.stringify(currentState);\r\n   setEditorState(jsonState);\r\n }\r\n\r\n const getPlainText = () => {\r\n   const plaintext = containerRef.current.getPlainText();\r\n   setEditorState(plaintext);\r\n }\r\n\r\n return (\r\n <div className=\"App\">\r\n\r\n   <div>\r\n     <Menu theme=\"dark\">\r\n       <h2 className=\"EditorNavbarText\">\r\n    \t  &nbsp;\r\n    \t </h2>\r\n  \t </Menu>\r\n\t </div>\r\n\r\n\t<div className=\"DocSection\">\r\n\t\t  <h2 className=\"SectionTitle\">Elementary Editor</h2>\r\n\t\t  <ol>\r\n\t\t\t<li><a href=\"#intro\">Introduction</a></li>\r\n\t\t\t<li><a href=\"#use\">How to use</a></li>\r\n\t\t\t<li><a href=\"#api\">API reference</a></li>\r\n\t\t\t<li><a href=\"#demo\">Play with the editor</a></li>\r\n\t\t\t<li><a href=\"#built-with\">Built with</a></li>\r\n\t\t  </ol>\r\n\t\t</div>\r\n\r\n\t\t<div className=\"DocSection\" id=\"intro\">\r\n\t\t  <h2 className=\"SectionTitle\">Introduction</h2>\r\n\t\t  <h3>So what is this, anyway?</h3>\r\n\t\t  <p>Elementary editor is a WYSWYG (What you see is what you get)\r\n  \t\t     text editor based on DraftJS and React (using AntD for styling).\r\n\t\t  </p>\r\n\t\t  <p>\r\n\t\t  </p>\r\n\t\t</div>\r\n\r\n\t\t<div className=\"DocSection\" id=\"use\">\r\n\t\t  <h2 className=\"SectionTitle\">Usage</h2>\r\n\t\t  <p>To use this editor in your project, first install the npm package:</p>\r\n   \t\t  <pre className=\"CodeSection\">yarn add elementary-editor</pre>\r\n\t\t  <br />\r\n\t\t  <p>Then use the editor inside your code</p>\r\n      <h3>Using classes</h3>\r\n\t\t  <pre className=\"CodeSection\">\r\n  \t\t\t<code>\r\n  \t\t\t{editorUsageCodeClass}\r\n  \t\t\t</code>\r\n\t\t  </pre>\r\n      <br />\r\n      <h3>Using hooks</h3>\r\n      <br />\r\n      <pre className=\"CodeSection\">\r\n        <code>\r\n        {editorUsageCodeHooks}\r\n        </code>\r\n      </pre>\r\n\t\t  <br />\r\n\t\t  <p>\r\n\t\t  The ref property is needed if you want to access the editor's internal methods.\r\n\t\t  </p>\r\n\t\t</div>\r\n\r\n\t\t<div className=\"DocSection\" id=\"api\">\r\n\t\t  <h2 className=\"SectionTitle\">API Reference</h2>\r\n\t\t  <div>\r\n\t\t    <h3>Properties</h3>\r\n   \t\t    <p>The editor exposes the following properties:</p>\r\n\t\t    <br />\r\n\t\t    <Table\r\n\t\t\t  columns={editorPropsColumns}\r\n\t\t\t  dataSource={editorProps}\r\n\t\t\t  pagination={false}\r\n\t\t    />\r\n\t\t  </div>\r\n\r\n\t\t  <div className=\"MethodsDoc\">\r\n\t\t    <h3>Methods</h3>\r\n   \t\t    <p>The editor exposes the following methods:</p>\r\n\t\t    <br />\r\n\t\t    <Table\r\n\t\t\t  columns={editorMethodsColumns}\r\n\t\t\t  dataSource={editorMethods}\r\n\t\t\t  pagination={false}\r\n\t\t    />\r\n\t\t  </div>\r\n\r\n\t\t</div>\r\n        <div className=\"DocSection\" id=\"demo\">\r\n\t\t  <h2 className=\"SectionTitle\">Demo</h2>\r\n\t\t  <div>\r\n\t\t   <div className=\"EditorContainer\">\r\n\t\t\t <Editor\r\n\t\t\t    initialState={null}\r\n\t\t\t\t  containerRef={containerRef}\r\n\t\t\t />\r\n\t\t   </div>\r\n\t\t </div>\r\n\r\n\t\t <div>\r\n\t\t\t<ButtonGroup className=\"LogStateButton\">\r\n\t\t\t\t<Button type=\"primary\" onClick={clearEditor}>\r\n\t\t\t\t   Clear editor\r\n\t\t\t\t</Button>\r\n\t\t\t\t<Button type=\"primary\" onClick={logState}>\r\n\t\t\t\t\t Log State\r\n\t\t\t\t</Button>\r\n        <Button type=\"primary\" onClick={getPlainText}>\r\n\t\t\t\t\t Log plain text\r\n\t\t\t\t</Button>\r\n\t\t\t</ButtonGroup>\r\n\t\t </div>\r\n\t\t <div className=\"LogStateResult\">\r\n\t\t\t<Card>\r\n\t\t\t  <p>\r\n\t\t\t\t{editorState != null ?\r\n\t\t\t\t editorState : \"Press 'Log state' to log the current state.\"\r\n\t\t\t\t}\r\n\t\t\t  </p>\r\n\t\t\t</Card>\r\n\t\t </div>\r\n   \t  </div>\r\n\t  <div className=\"DocSection\" id=\"built-with\">\r\n\t\t  <h2 className=\"SectionTitle\">Technologies used</h2>\r\n\t\t  <h3>Elementary Editor was built with:</h3>\r\n\t\t  <br />\r\n\t\t  <p>\r\n\t\t   <a href=\"https://facebook.github.io/react/\">React</a> - A Javascript library for building user interfaces.\r\n\t\t  </p>\r\n\t\t  <p>\r\n\t\t   <a href=\"https://draftjs.org/\">Draft-JS</a> - Rich text editor framework for React.\r\n\t\t  </p>\r\n\t\t  <p>\r\n\t\t   <a href=\"https://ant.design/\">ANT.Design</a> - A UI Design Language.\r\n\t\t  </p>\r\n\t  </div>\r\n\t  <br />\r\n\t  <br />\r\n\t  <br />\r\n\t</div>\r\n\t);\r\n\r\n}\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from './App';\r\n\r\nReactDOM.render(<App />, document.getElementById(\"root\"));\r\n"],"sourceRoot":""}